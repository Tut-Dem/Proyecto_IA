{% extends "layout.html" %}

{% block content %}
    <div class="container">
        <h1 class="display-5 fw-bold" style="color: white; padding-top: 100px;">Resultados</h1>
        <table id="result-table" class="table table-striped table-dark">
            <thead>
                <tr>
                    <th scope="col">Usuario</th>
                    <th scope="col">Fecha</th>
                    <th scope="col">Comentario</th>
                    <th scope="col">Predicci√≥n</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const rawData = decodeURIComponent('{{ data|tojson|safe }}');
            const data = JSON.parse(rawData);

            const tbody = document.getElementById('result-table').querySelector('tbody');

            data.forEach(item => {
                const row = document.createElement('tr');

                const userCell = document.createElement('td');
                userCell.textContent = item.user;

                const dateCell = document.createElement('td');
                dateCell.textContent = item.formatted_date;

                const commentCell = document.createElement('td');
                commentCell.textContent = item.text;

                const predictCell = document.createElement('td');
                predictCell.textContent = item.prediction ? 'Depresivo' : 'No Depresivo';

                row.appendChild(userCell);
                row.appendChild(dateCell);
                row.appendChild(commentCell);
                row.appendChild(predictCell);

                tbody.appendChild(row);
            });
        });
    </script>
{% endblock %}
